## 状态模式

### 定义

**允许对象在内部状态改变时改变他的行为，对象看起来好像修改了他的类**

* 将状态封装成独立的类，并将动作委托到代表当前动作的对象，行为会随着内部状态的改变而改变。
* 客户视角来说，如果使用对象能够完全改变他的行为，这个对象实际上是从别的类实例化而来的。

<img src="E:\研究生学习\Typora图片\1575564972166.png" alt="1575564972166" style="zoom:80%;" />

### 与策略模式比较

* 状态模式将一群行为封装到状态对象中，context的行为随时可以委托到那些状态对象中的一个。客户无需了解对象的改变
* 策略模式客户指定context所要组合的策略对象是哪个，更有弹性、对于某个context来说，通常只有一个最适合的策略对象
* 策略模式是除了继承之外的一种弹性替代方案。如果用继承定义一个类的行为，则难以修改。**策略模式可以通过组合不同的对象来改变行为**
* 状态模式是不用再context中放置判断条件的替代方案，将行为包装进状态对象中可以通过在context内简单的改变状态对象来改变context的行为。

### 谁决定下一个状态是什么？

状态装换固定时，适合放在静态类中，不固定转换时放在state里

### 总结

* 策略模式通常会用行为或算法来配置Context类。状态模式允许Context随着状态的改变而改变行为
* 状态类可以被多个Context实例共享